(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{149:function(e,t,a){"use strict";a.d(t,"a",(function(){return b})),a.d(t,"b",(function(){return m}));var r=a(0),n=a.n(r);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var l=n.a.createContext({}),u=function(e){var t=n.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):i(i({},t),e)),a},b=function(e){var t=u(e.components);return n.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},p=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),b=u(a),p=r,m=b["".concat(c,".").concat(p)]||b[p]||d[p]||o;return a?n.a.createElement(m,i(i({ref:t},l),{},{components:a})):n.a.createElement(m,i({ref:t},l))}));function m(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,c=new Array(o);c[0]=p;var i={};for(var s in t)hasOwnProperty.call(t,s)&&(i[s]=t[s]);i.originalType=e,i.mdxType="string"==typeof e?e:r,c[1]=i;for(var l=2;l<o;l++)c[l]=a[l];return n.a.createElement.apply(null,c)}return n.a.createElement.apply(null,a)}p.displayName="MDXCreateElement"},84:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return c})),a.d(t,"metadata",(function(){return i})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return u}));var r=a(2),n=a(6),o=(a(0),a(149)),c={id:"code-structure",title:"Code Structure",hide_title:!0},i={unversionedId:"faq/code-structure",id:"faq/code-structure",isDocsHomePage:!1,title:"Code Structure",description:"Redux FAQ: Code Structure",source:"@site/../docs_kr/faq/CodeStructure.md",slug:"/faq/code-structure",permalink:"/faq/code-structure",version:"current",sidebar:"docs",previous:{title:"Immutable Data",permalink:"/faq/immutable-data"},next:{title:"Performance",permalink:"/faq/performance"}},s=[{value:"Table of Contents",id:"table-of-contents",children:[]},{value:"Code Structure",id:"code-structure",children:[{value:"What should my file structure look like? How should I group my action creators and reducers in my project? Where should my selectors go?",id:"what-should-my-file-structure-look-like-how-should-i-group-my-action-creators-and-reducers-in-my-project-where-should-my-selectors-go",children:[]},{value:"How should I split my logic between reducers and action creators? Where should my \u201cbusiness logic\u201d go?",id:"how-should-i-split-my-logic-between-reducers-and-action-creators-where-should-my-business-logic-go",children:[]},{value:"Why should I use action creators?",id:"why-should-i-use-action-creators",children:[]},{value:"Where should websockets and other persistent connections live?",id:"where-should-websockets-and-other-persistent-connections-live",children:[]}]}],l={rightToc:s};function u(e){var t=e.components,a=Object(n.a)(e,["components"]);return Object(o.b)("wrapper",Object(r.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h1",{id:"redux-faq-code-structure"},"Redux FAQ: Code Structure"),Object(o.b)("h2",{id:"table-of-contents"},"Table of Contents"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#what-should-my-file-structure-look-like-how-should-i-group-my-action-creators-and-reducers-in-my-project-where-should-my-selectors-go"}),"What should my file structure look like? How should I group my action creators and reducers in my project? Where should my selectors go?")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#how-should-i-split-my-logic-between-reducers-and-action-creators-where-should-my-business-logic-go"}),"How should I split my logic between reducers and action creators? Where should my \u201cbusiness logic\u201d go?")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#why-should-i-use-action-creators"}),"Why should I use action creators?")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"#where-should-websockets-and-other-persistent-connections-live"}),"Where should websockets and other persistent connections live?"))),Object(o.b)("h2",{id:"code-structure"},"Code Structure"),Object(o.b)("h3",{id:"what-should-my-file-structure-look-like-how-should-i-group-my-action-creators-and-reducers-in-my-project-where-should-my-selectors-go"},"What should my file structure look like? How should I group my action creators and reducers in my project? Where should my selectors go?"),Object(o.b)("p",null,"Since Redux is just a data store library, it has no direct opinion on how your project should be structured. However, there are a few common patterns that most Redux developers tend to use:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Rails-style: separate folders for \u201cactions\u201d, \u201cconstants\u201d, \u201creducers\u201d, \u201ccontainers\u201d, and \u201ccomponents\u201d"),Object(o.b)("li",{parentName:"ul"},"Domain-style: separate folders per feature or domain, possibly with sub-folders per file type"),Object(o.b)("li",{parentName:"ul"},"\u201cDucks\u201d: similar to domain style, but explicitly tying together actions and reducers, often by defining them in the same file")),Object(o.b)("p",null,"It's generally suggested that selectors are defined alongside reducers and exported, and then reused elsewhere (such as in ",Object(o.b)("inlineCode",{parentName:"p"},"mapStateToProps")," functions, in async action creators, or sagas) to colocate all the code that knows about the actual shape of the state tree in the reducer files."),Object(o.b)("p",null,"While it ultimately doesn't matter how you lay out your code on disk, it's important to remember that actions and reducers should be considered in isolation. It's entirely possible (and encouraged) for a reducer defined in one folder to respond to an action defined in another folder."),Object(o.b)("h4",{id:"further-information"},"Further information"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Documentation")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/faq/actions#actions-reducer-mappings"}),'FAQ: Actions - "1:1 mapping between reducers and actions?"'))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Articles")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://www.smashingmagazine.com/2016/09/how-to-scale-react-applications/"}),"How to Scale React Applications")," (accompanying talk: ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://vimeo.com/168648012"}),"Scaling React Applications"),")"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://medium.com/lexical-labs-engineering/redux-best-practices-64d59775802e"}),"Redux Best Practices")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://jaysoo.ca/2016/02/28/organizing-redux-application/"}),"Rules For Structuring (Redux) Applications ")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://marmelab.com/blog/2015/12/17/react-directory-structure.html"}),"A Better File Structure for React/Redux Applications")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://engineering.kapost.com/2016/01/organizing-large-react-applications/"}),"Organizing Large React Applications")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://medium.com/@msandin/strategies-for-organizing-code-2c9d690b6f33"}),"Four Strategies for Organizing Code")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://randycoulman.com/blog/2016/09/13/encapsulating-the-redux-state-tree/"}),"Encapsulating the Redux State Tree")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://randycoulman.com/blog/2016/09/20/redux-reducer-selector-asymmetry/"}),"Redux Reducer/Selector Asymmetry")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://randycoulman.com/blog/2016/09/27/modular-reducers-and-selectors/"}),"Modular Reducers and Selectors")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://medium.com/@mmazzarolo/my-journey-toward-a-maintainable-project-structure-for-react-redux-b05dfd999b5"}),"My journey towards a maintainable project structure for React/Redux")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/markerikson/react-redux-links/blob/master/react-redux-architecture.md#project-file-structure"}),"React/Redux Links: Architecture - Project File Structure"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Discussions")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/reduxjs/redux/issues/839"}),"#839: Emphasize defining selectors alongside reducers")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/reduxjs/redux/issues/943"}),"#943: Reducer querying")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/mxstbr/react-boilerplate/issues/27"}),"React Boilerplate #27: Application Structure")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://stackoverflow.com/questions/32634320/how-to-structure-redux-components-containers/32921576"}),"Stack Overflow: How to structure Redux components/containers")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://twitter.com/dan_abramov/status/783428282666614784"}),"Twitter: There is no ultimate file structure for Redux"))),Object(o.b)("h3",{id:"how-should-i-split-my-logic-between-reducers-and-action-creators-where-should-my-business-logic-go"},"How should I split my logic between reducers and action creators? Where should my \u201cbusiness logic\u201d go?"),Object(o.b)("p",null,"There's no single clear answer to exactly what pieces of logic should go in a reducer or an action creator. Some developers prefer to have \u201cfat\u201d action creators, with \u201cthin\u201d reducers that simply take the data in an action and blindly merge it into the corresponding state. Others try to emphasize keeping actions as small as possible, and minimize the usage of ",Object(o.b)("inlineCode",{parentName:"p"},"getState()"),' in an action creator. (For purposes of this question, other async approaches such as sagas and observables fall in the "action creator" category.)'),Object(o.b)("p",null,"There are some potential benefits from putting more logic into your reducers. It's likely that the action types would be more semantic and more meaningful (such as ",Object(o.b)("inlineCode",{parentName:"p"},'"USER_UPDATED"')," instead of ",Object(o.b)("inlineCode",{parentName:"p"},'"SET_STATE"'),"). In addition, having more logic in reducers means that more functionality will be affected by time travel debugging."),Object(o.b)("p",null,"This comment sums up the dichotomy nicely:"),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"Now, the problem is what to put in the action creator and what in the reducer, the choice between fat and thin action objects. If you put all the logic in the action creator, you end up with fat action objects that basically declare the updates to the state. Reducers become pure, dumb, add-this, remove that, update these functions. They will be easy to compose. But not much of your business logic will be there.\nIf you put more logic in the reducer, you end up with nice, thin action objects, most of your data logic in one place, but your reducers are harder to compose since you might need info from other branches. You end up with large reducers or reducers that take additional arguments from higher up in the state.")),Object(o.b)("p",null,"Find the balance between these two extremes, and you will master Redux."),Object(o.b)("h4",{id:"further-information-1"},"Further information"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Articles")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://medium.com/@jeffbski/where-do-i-put-my-business-logic-in-a-react-redux-application-9253ef91ce1"}),"Where do I put my business logic in a React/Redux application?")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://www.smashingmagazine.com/2016/09/how-to-scale-react-applications/"}),"How to Scale React Applications")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://blog.isquaredsoftware.com/2017/05/idiomatic-redux-tao-of-redux-part-2/#thick-and-thin-reducers"}),"The Tao of Redux, Part 2 - Practice and Philosophy. Thick and thin reducers."))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Discussions")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/reduxjs/redux/issues/384#issuecomment-127393209"}),"How putting too much logic in action creators could affect debugging")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/reduxjs/redux/issues/384#issuecomment-127393209"}),"#384: The more that's in a reducer, the more you can replay via time travel")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/reduxjs/redux/issues/1165"}),"#1165: Where to put business logic / validation?")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/reduxjs/redux/issues/1171"}),"#1171: Recommendations for best practices regarding action-creators, reducers, and selectors")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://stackoverflow.com/questions/35667249/accessing-redux-state-in-an-action-creator/35674575"}),"Stack Overflow: Accessing Redux state in an action creator?")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/reduxjs/redux/issues/2796#issue-289298280"}),'#2796: Gaining clarity on "business logic"')),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://twitter.com/FwardPhoenix/status/952971237004926977"}),"Twitter: Moving away from unclear terminology..."))),Object(o.b)("h3",{id:"why-should-i-use-action-creators"},"Why should I use action creators?"),Object(o.b)("p",null,"Redux does not require action creators. You are free to create actions in any way that is best for you, including simply passing an object literal to ",Object(o.b)("inlineCode",{parentName:"p"},"dispatch"),". Action creators emerged from the ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://facebook.github.io/react/blog/2014/07/30/flux-actions-and-the-dispatcher.html#actions-and-actioncreators"}),"Flux architecture")," and have been adopted by the Redux community because they offer several benefits."),Object(o.b)("p",null,"Action creators are more maintainable. Updates to an action can be made in one place and applied everywhere. All instances of an action are guaranteed to have the same shape and the same default values."),Object(o.b)("p",null,"Action creators are testable. The correctness of an inline action must be verified manually. Like any function, tests for an action creator can be written once and run automatically."),Object(o.b)("p",null,"Action creators are easier to document. The action creator's parameters enumerate the action's dependencies. And centralization of the action definition provides a convenient place for documentation comments. When actions are written inline, this information is harder to capture and communicate."),Object(o.b)("p",null,"Action creators are a more powerful abstraction. Creating an action often involves transforming data or making AJAX requests. Action creators provide a uniform interface to this varied logic. This abstraction frees a component to dispatch an action without being complicated by the details of that action's creation."),Object(o.b)("h4",{id:"further-information-2"},"Further information"),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Articles")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"http://blog.isquaredsoftware.com/2016/10/idiomatic-redux-why-use-action-creators/"}),"Idiomatic Redux: Why use action creators?"))),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Discussions")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://www.reddit.com/r/reactjs/comments/54k8js/redbox_redux_action_creation_made_simple/d8493z1/?context=4"}),"Reddit: Redbox - Redux action creation made simple"))),Object(o.b)("h3",{id:"where-should-websockets-and-other-persistent-connections-live"},"Where should websockets and other persistent connections live?"),Object(o.b)("p",null,"Middleware are the right place for persistent connections like websockets in a Redux app, for several reasons:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Middleware exist for the lifetime of the application"),Object(o.b)("li",{parentName:"ul"},"Like with the store itself, you probably only need a single instance of a given connection that the whole app can use"),Object(o.b)("li",{parentName:"ul"},"Middleware can see all dispatched actions and dispatch actions themselves. This means a middleware can take dispatched actions and turn those into messages sent over the websocket, and dispatch new actions when a message is received over the websocket."),Object(o.b)("li",{parentName:"ul"},"A websocket connection instance isn't serializable, so ",Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"/faq/organizing-state#organizing-state-non-serializable"}),"it doesn't belong in the store state itself"))),Object(o.b)("p",null,"See ",Object(o.b)("a",Object(r.a)({parentName:"p"},{href:"https://gist.github.com/markerikson/3df1cf5abbac57820a20059287b4be58"}),"this example that shows how a socket middleware might dispatch and respond to Redux actions"),"."),Object(o.b)("p",null,"There's many existing middleware for websockets and other similar connections - see the link below."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Libraries")),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(r.a)({parentName:"li"},{href:"https://github.com/markerikson/redux-ecosystem-links/blob/master/middleware-sockets-adapters.md"}),"Middleware: Socket and Adapters"))))}u.isMDXComponent=!0}}]);